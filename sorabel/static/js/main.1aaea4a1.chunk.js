(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{204:function(e,t,a){},316:function(e,t,a){e.exports=a(542)},500:function(e,t,a){},509:function(e,t,a){},510:function(e,t,a){},541:function(e,t,a){},542:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(67),i=a.n(o),c=a(23),l=a(24),s=a(27),u=a(25),d=a(26),m=a(63),p=a(191),h=a(558),f=a(559),E=a(543),O=a(110),b=a.n(O),v=(a(204),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={activeItem:""},a.handleItemClick=function(e,t){var n=t.name;return a.setState({activeItem:n})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.activeItem;return r.a.createElement("div",{className:"container-menu-header"},r.a.createElement(h.a,{secondary:!0,className:"custom-header"},r.a.createElement(h.a.Item,{name:"home",active:"home"===e,onClick:this.handleItemClick},r.a.createElement(b.a,{to:"/"},r.a.createElement(f.a,{as:"h2",color:"purple"},"SORABEL"))),r.a.createElement(h.a.Menu,{position:"right"},r.a.createElement(h.a.Item,null,r.a.createElement(b.a,{to:"/add"},r.a.createElement(E.a,{color:"purple"},"Tambah"))))))}}]),t}(n.Component)),g=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.children;return r.a.createElement("div",{className:"container-sorabel"},r.a.createElement(v,null),e)}}]),t}(r.a.Component),C=a(51),j=a(551),y=a(563),R=a(561),P=a(552),S=a(31),k=a(62),_=a(49),D=a(151),M=a.n(D),T=a(290),I=a.n(T),A=a(556),w=a(82),x=a(291),L=a.n(x),N={imgLoader:"https://loading.io/spinners/spin/lg.ajax-spinner-gif.gif",imgFailed:"https://react.semantic-ui.com/images/wireframe/image.png"},U=function(e){var t=r.a.createElement("img",{src:N.imgLoader,className:"img-product",alt:"loader"}),a=r.a.createElement("img",{src:N.imgFailed,className:"img-product",alt:"failed"});return r.a.createElement(L.a,Object.assign({},e,{loader:t,unloader:a}))},F=function(e){return e.replace(/-/g," "),e.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},z=function(e){var t=e.toString().split(","),a=t[0].length%3,n=t[0].substr(0,a),r=t[0].substr(a).match(/\d{1,3}/gi);r&&(n+=(a?".":"")+r.join("."));return n=void 0!==t[1]?n+","+t[1]:n},B=function(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)},H=a(28),G=function(e,t){return function(a){a({type:"OPEN_OR_CLOSE_MODAL",isOpen:e,id:t})}},V=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={},a.toDetail=a.toDetail.bind(Object(C.a)(a)),a.openOrClose=a.openOrClose.bind(Object(C.a)(a)),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"toDetail",value:function(){var e=this.props,t=e.item;e.history.push("/detail/".concat(t.id))}},{key:"openOrClose",value:function(){var e=this.props,t=e.openOrCloseModal,a=e.openModal,n=e.item;t(!a.isOpen,n.id)}},{key:"render",value:function(){var e=this.props.item,t=e.name;return r.a.createElement(A.a,{fluid:!0,className:"product-item"},r.a.createElement("div",{onClick:this.toDetail},r.a.createElement(U,{src:e.img_url,className:"img-product"})),r.a.createElement(A.a.Content,{onClick:this.toDetail},r.a.createElement(A.a.Header,{size:"tiny"},F(t)),r.a.createElement(A.a.Meta,null,r.a.createElement("span",{className:"date"},"Rp ",z(e.price))),r.a.createElement(A.a.Description,null,e.description)),r.a.createElement(A.a.Content,{extra:!0},r.a.createElement(b.a,{onClick:this.openOrClose},r.a.createElement(w.a,{name:"trash"})," Delete")))}}]),t}(r.a.Component),K=Object(S.b)(function(e){return{openModal:e.openModal}},function(e){return{openOrCloseModal:function(t,a){return e(G(t,a))}}})(V),q=a(555),J=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={options:[{text:"Terbaru",value:"newest"},{text:"Harga Termahal",value:"expensive"},{text:"Harga Termurah",value:"cheapest"}]},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleSort",value:function(e){this.props.sortProducts(e)}},{key:"render",value:function(){var e=this,t=this.state.options;return r.a.createElement(q.a,{text:"Sort",icon:"sort",direction:"right",labeled:!0,button:!0,className:"icon",options:t,onChange:function(t,a){return e.handleSort(a.value)}})}}]),t}(n.Component),W=Object(S.b)(function(e){return{manage:e.manage}},function(e){return{sortProducts:function(t){return e((a=t,function(e){var t=["createdAt","desc"];"newest"===a&&(t=["createdAt","desc"]),"expensive"===a&&(t=["price","desc"]),"cheapest"===a&&(t=["price","asc"]),e({type:"SORT_PRODUCTS",payload:t})}));var a}}})(J),Y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={options:[{text:"Semua Barang",value:0},{text:"Mini Dress",value:1},{text:"Midi Dress",value:2},{text:"Maxi Dress",value:3}]},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleFilter",value:function(e){this.props.filterProducts(e)}},{key:"render",value:function(){var e=this,t=this.state.options;return r.a.createElement(q.a,{text:"Filter",icon:"filter",direction:"right",button:!0,className:"icon",labeled:!0,options:t,onChange:function(t,a){return e.handleFilter(a.value)}})}}]),t}(n.Component),$=Object(S.b)(function(e){return{manage:e.manage}},function(e){return{filterProducts:function(t){return e((a=t,function(e){e({type:"FILTER_PRODUCTS",payload:a})}));var a}}})(Y),Z=a(560),Q=a(550),X=function(){return r.a.createElement(Z.a,{active:!0},r.a.createElement(Q.a,{size:"massive"},"Loading"))},ee=function(){return r.a.createElement(R.a,{className:"search-sort-filter"},r.a.createElement(Z.a,{active:!0,inverted:!0},r.a.createElement(Q.a,{active:!0,inline:"centered"})))},te=a(554),ae=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).openOrClose=function(){var e=a.props;(0,e.openOrCloseModal)(!e.openModal.isOpen,null)},a.state={open:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.openModal,a=e.confirmAction;return r.a.createElement(te.a,{open:t.isOpen,size:"mini"},r.a.createElement(f.a,{icon:"archive",content:"Delete Product"}),r.a.createElement(te.a.Content,null,r.a.createElement("p",null,"Are you sure delete this product?")),r.a.createElement(te.a.Actions,null,r.a.createElement(E.a,{color:"red",onClick:this.openOrClose},r.a.createElement(w.a,{name:"remove"})," No"),r.a.createElement(E.a,{color:"green",onClick:function(){return a()}},r.a.createElement(w.a,{name:"checkmark"})," Yes")))}}]),t}(n.Component),ne=Object(S.b)(function(e){return{openModal:e.openModal}},function(e){return{openOrCloseModal:function(t,a){return e(G(t,a))}}})(ae),re=(a(500),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={loadingSearch:!1,tempProducts:[]},a.timeout=null,a.loadMore=a.loadMore.bind(Object(C.a)(a)),a.loadMoreProducts=!1,a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"loadMore",value:function(){var e=this,t=this.props,a=t.products,n=t.getMoreProducts;this.loadMoreProducts||(this.loadMoreProducts=!0,a.length%5===0?(n(),setTimeout(function(){e.loadMoreProducts=!1},2e3)):setTimeout(function(){e.loadMoreProducts=!1},2e3))}},{key:"removeProductItem",value:function(e){var t=this.props,a=t.removeProduct,n=t.openModal,r=t.openOrCloseModal;a(n.id,function(e){e&&r(!n.isOpen,null)})}},{key:"handleData",value:function(){var e=this.props,t=e.manage,a=e.products;return a?t.category?"createdAt"===t.sort[0]?M.a.sortBy(a,"createdAt").reverse():"price"===t.sort[0]&&"asc"===t.sort[1]?M.a.sortBy(a,"price"):"price"===t.sort[0]&&"desc"===t.sort[1]?M.a.sortBy(a,"price").reverse():a:t.search&&a.length<1?this.state.tempProducts.filter(function(e){var a=t.search.split(" ").map(function(e){return"".concat(e)}).join("|");return new RegExp(a,"gi").test(e.name)}):a:[]}},{key:"handleSearch",value:function(e){var t=this,a=e.target.value;this.setState({loadingSearch:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.setState({loadingSearch:!1,tempProducts:t.props.products},function(){t.props.searchProducts(a)})},2e3)}},{key:"render",value:function(){var e=this,t=this.state.loadingSearch,a=this.props,n=a.history,o=a.products;return o?r.a.createElement("div",{className:"list-products"},r.a.createElement(ne,{confirmAction:function(){return e.removeProductItem()}}),r.a.createElement(j.a,null,r.a.createElement(y.a,{centered:!0},r.a.createElement(y.a.Row,{columns:1},r.a.createElement(y.a.Column,null,r.a.createElement(R.a,{className:"search-sort-filter"},r.a.createElement("div",{className:"section-filter"},r.a.createElement($,null),r.a.createElement(W,null)),r.a.createElement("div",{className:"section-search"},r.a.createElement(P.a,{icon:"search",fluid:!0,placeholder:"Search...",onChange:function(t){return e.handleSearch(t)}}))))),t&&!this.loadMoreProducts&&r.a.createElement(ee,null),r.a.createElement(I.a,{pageStart:0,loadMore:this.loadMore,hasMore:o.length%5===0,loader:r.a.createElement(ee,null)},this.handleData().map(function(e,t){return r.a.createElement(K,{key:t,history:n,item:e})}))))):r.a.createElement(X,null)}}]),t}(r.a.Component)),oe=Object(_.d)(Object(S.b)(function(e){return{products:e.firestore.ordered.products,deleteProduct:e.deleteProduct,openModal:e.openModal,manage:e.manage}},function(e){return{removeProduct:function(t,a){return e((n=t,r=a,function(e,t,a){var o=a.getFirestore;e({type:"DELETE_PRODUCT_LOADING"}),o().collection("products").doc(n).delete().then(function(){r(!0),e({type:"DELETE_PRODUCT_SUCCESS",payload:n})}).catch(function(t){r(!1),e({type:"DELETE_PRODUCT_ERROR"},t)})}));var n,r},openOrCloseModal:function(t,a){return e(G(t,a))},searchProducts:function(t){return e((a=t,function(e){e({type:"SEARCH_PRODUCTS",payload:a})}));var a},getMoreProducts:function(){return e(function(e){e({type:"GET_MORE_PRODUCTS"})})}}}),Object(k.firestoreConnect)(function(e){var t=e.manage,a=t.search,n=t.category,r=t.limit,o=t.sort;return n&&(o=null),a&&(o="name"),[{collection:"products",where:[n&&!a?["category","==",Number(n)]:[]],orderBy:o,limit:r,startAt:a||null,endAt:a?"".concat(a,"\uf8ff"):null}]}))(re),ie=a(303),ce=(a(508),a(509),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={open:!1},a.previewImage=a.previewImage.bind(Object(C.a)(a)),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"previewImage",value:function(){var e=this.state.open;this.setState({open:!e})}},{key:"render",value:function(){var e=this,t=this.state.open,a=this.props.product;return a?t?r.a.createElement(ie.a,{mainSrc:a.img_url,onCloseRequest:function(){return e.setState({open:!1})}}):r.a.createElement("div",{className:"detail-product"},r.a.createElement(A.a,{fluid:!0},r.a.createElement(U,{src:a.img_url,className:"img-product-detail",onClick:this.previewImage}),r.a.createElement(A.a.Content,null,r.a.createElement(A.a.Header,null,F(a.name)),r.a.createElement(A.a.Meta,null,r.a.createElement("span",{className:"date"},"Rp ",z(a.price))),r.a.createElement(A.a.Description,null,a.description)))):r.a.createElement(X,null)}}]),t}(n.Component)),le=Object(_.d)(Object(S.b)(function(e,t){var a=t.match.params.id,n=e.firestore.data.products;return{product:n?n[a]:null}}),Object(k.firestoreConnect)([{collection:"products"}]))(ce),se=a(557),ue=a(553),de=(a(510),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={form:{img_url:"",name:"",category:0,price:"",description:"",createdAt:new Date},validation:!1,options:[{key:"mini",text:"Mini Dress",value:1},{key:"midi",text:"Midi Dress",value:2},{key:"maxi",text:"Maxi Dress",value:3}]},a.postProduct=a.postProduct.bind(Object(C.a)(a)),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleCategory",value:function(e){var t=this.state.form;this.setState({form:Object(H.a)({},t,{category:e})})}},{key:"handleInput",value:function(e){var t=e.target,a=t.name,n=t.value,r={form:this.state.form};r.form[a]="price"===a?n.replace(/[^0-9]/g,""):n,this.setState(r)}},{key:"renderValidation",value:function(e,t){var a=this.state,n=a.form,o=a.validation,i="name"===e&&n.name,c="price"===e&&n.price,l="description"===e&&n.description,s="img_url"===e&&B(n.img_url);return o&&!(i||c||l||s)&&r.a.createElement(se.a,{negative:!0},r.a.createElement("p",null,t))}},{key:"postProduct",value:function(){var e=this,t=this.state.form,a=t.name,n=t.price,r=t.description,o=B(t.img_url);a&&n&&r&&o?this.props.createProduct(Object(H.a)({},t,{price:Number(t.price)}),function(t){t&&e.props.history.push("/")}):this.setState({validation:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.form,n=t.options,o=this.props.addProduct;return r.a.createElement("div",{className:"add-product"},r.a.createElement(j.a,null,o.isError&&r.a.createElement(se.a,{negative:!0},r.a.createElement(se.a.Header,null,"Create Product failure"),r.a.createElement("p",null,"checking again your input must valid data")),r.a.createElement(ue.a,null,r.a.createElement(ue.a.Field,null,r.a.createElement(ue.a.Input,{fluid:!0,label:"Nama Produk",name:"name",value:a.name,placeholder:"Isi nama produk",onChange:function(t){return e.handleInput(t)},autoComplete:"off"}),this.renderValidation("name","Mohon isi nama produk")),r.a.createElement(ue.a.Field,null,r.a.createElement("label",null,"Kategori (Optional)"),r.a.createElement(q.a,{placeholder:"Pilih Kategori",fluid:!0,selection:!0,options:n,onChange:function(t,a){return e.handleCategory(a.value)}})),r.a.createElement(ue.a.Field,null,r.a.createElement(ue.a.Input,{fluid:!0,label:"Harga",name:"price",value:a.price,placeholder:"Isi harga produk",onChange:function(t){return e.handleInput(t)},autoComplete:"off"}),this.renderValidation("price","Mohon isi harga produk")),r.a.createElement(ue.a.Field,null,r.a.createElement(ue.a.TextArea,{name:"description",label:"Deskripsi",value:a.description,placeholder:"Isi description produk",onChange:function(t){return e.handleInput(t)},autoComplete:"off"}),this.renderValidation("description","Mohon isi deskripsi produk")),r.a.createElement(ue.a.Field,null,r.a.createElement("label",null,"Image Url"),r.a.createElement("input",{name:"img_url",placeholder:"Isi link url gambar produk",value:a.img_url,onChange:function(t){return e.handleInput(t)},autoComplete:"off"}),this.renderValidation("img_url","Url image tidak valid")),r.a.createElement(E.a,{type:"submit",onClick:this.postProduct},"Submit"))))}}]),t}(r.a.Component)),me=Object(S.b)(function(e){return{addProduct:e.addProduct}},function(e){return{createProduct:function(t,a){return e((n=t,r=a,function(e,t,a){var o=a.getFirestore;e({type:"CREATE_PRODUCT_LOADING"}),o().collection("products").add(Object(H.a)({},n)).then(function(){r(!0),e({type:"CREATE_PRODUCT_SUCCESS",payload:n})}).catch(function(t){r(!1),e({type:"CREATE_PRODUCT_ERROR"},t)})}));var n,r}}})(de),pe=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement(g,null,r.a.createElement(m.Switch,null,r.a.createElement(m.Route,{path:"/",component:oe,exact:!0}),r.a.createElement(m.Route,{path:"/detail/:id",component:le,exact:!0}),r.a.createElement(m.Route,{path:"/add",component:me,exact:!0}))))}}]),t}(r.a.Component),he={isLoading:!1,isSuccess:!1,isError:!1},fe={hasMore:!1,search:"",limit:5,category:0,sort:["createdAt","desc"]},Ee=a(111),Oe=Object(_.c)({addProduct:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_PRODUCT_LOADING":return Object(H.a)({},e,{isLoading:!0});case"CREATE_PRODUCT_SUCCESS":return Object(H.a)({},e,{isLoading:!1,isSuccess:!0,data:t.payload});case"CREATE_PRODUCT_ERROR":return Object(H.a)({},e,{isLoading:!1,isSuccess:!1,isError:!0});default:return e}},deleteProduct:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DELETE_PRODUCT_LOADING":return Object(H.a)({},e,{isLoading:!0});case"DELETE_PRODUCT_SUCCESS":return Object(H.a)({},e,{isLoading:!1,isSuccess:!0,data:t.payload});case"DELETE_PRODUCT_ERROR":return Object(H.a)({},e,{isLoading:!1,isSuccess:!1,isError:!0});default:return e}},manage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SORT_PRODUCTS":return Object(H.a)({},e,{limit:5,sort:t.payload});case"FILTER_PRODUCTS":return Object(H.a)({},e,{limit:5,category:t.payload});case"SEARCH_PRODUCTS":return Object(H.a)({},e,{limit:5,search:t.payload});case"GET_MORE_PRODUCTS":return Object(H.a)({},e,{limit:e.limit+5});case"HAS_LOAD_MORE":return Object(H.a)({},e,{limit:t.payload.limit||e.limit,hasMore:t.payload.hasMore});default:return e}},openModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isOpen:!1,id:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_OR_CLOSE_MODAL":return Object(H.a)({},e,{isOpen:t.isOpen,id:t.id});default:return e}},firestore:Ee.firestoreReducer,firebase:k.firebaseReducer}),be=a(305),ve=a(153),ge=a.n(ve);a(535),a(538);ge.a.initializeApp({apiKey:"AIzaSyDYy8TGhhI7xG_v4c74o_v7gjqCOi4Z6D0",authDomain:"sorabel-3bf1b.firebaseapp.com",databaseURL:"https://sorabel-3bf1b.firebaseio.com",projectId:"sorabel-3bf1b",storageBucket:"sorabel-3bf1b.appspot.com",messagingSenderId:"857259043638",appId:"1:857259043638:web:b65e0c09bb7e7a82"}),ge.a.firestore().settings({timestampsInSnapshots:!0});var Ce=ge.a;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(540),a(541);var je=Object(_.e)(Oe,Object(_.d)(Object(_.a)(be.a.withExtraArgument({getFirebase:k.getFirebase,getFirestore:Ee.getFirestore})),Object(k.reactReduxFirebase)(Ce,{userProfile:"users",useFirestoreForProfile:!0,attachAuthIsReady:!0}),Object(Ee.reduxFirestore)(Ce)));je.firebaseAuthIsReady.then(function(){i.a.render(r.a.createElement(S.a,{store:je},r.a.createElement(pe,null)),document.getElementById("root"))}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[316,1,2]]]);
//# sourceMappingURL=main.1aaea4a1.chunk.js.map